<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å³æ™‚æ›è‚¡åˆ¤æ–·ç³»çµ±</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
    .card { padding: 15px; margin: 10px 0; border-radius: 8px; }
    .go { background: #e0ffe0; color: #007e33; }
    .alert { background: #ffe0e0; color: #b00020; }
    .neutral { background: #fff8e1; color: #ff6f00; }
  </style>
</head>
<body>
  <h1 id="title">ğŸ“Š æ›è‚¡åˆ¤æ–·ç³»çµ±</h1>
  <div class="card" id="card6191">è¼‰å…¥ä¸­...</div>
  <div class="card" id="card5469">è¼‰å…¥ä¸­...</div>
  <div class="card neutral" id="finalAdvice">åˆ†æä¸­...</div>

  <script>
    const TWSE_URL = "https://openapi.twse.com.tw/v1/opendata/t187ap03_L";

    const symbols = {
      "6191": "ç²¾æˆç§‘",
      "5469": "ç€šå®‡åš"
    };

    const unicode = {
      leftParen: "\uFF08", rightParen: "\uFF09", plus: "\u002B",
      percent: "\u0025", comma: "\u002C", colon: "\uFF1A", period: "\u3002"
    };

    fetch(TWSE_URL)
      .then(res => res.json())
      .then(data => {
        const s6191 = data.find(d => d.Code === "6191");
        const s5469 = data.find(d => d.Code === "5469");

        const change6191 = ((s6191.Close - s6191.YesterdayPrice) / s6191.YesterdayPrice) * 100;
        const change5469 = ((s5469.Close - s5469.YesterdayPrice) / s5469.YesterdayPrice) * 100;

        const html6191 = "<strong>" + symbols["6191"] + unicode.leftParen + "6191" + unicode.rightParen + "</strong><br>" +
          "æœ€æ–°è‚¡åƒ¹" + unicode.colon + s6191.Close + " å…ƒ" + unicode.leftParen + unicode.plus + change6191.toFixed(2) + unicode.percent + unicode.rightParen + "<br>" +
          "åˆ¤æ–·" + unicode.colon + (change6191 > 5 ? "ğŸš¨ é«˜æª”å¼·å‹¢" + unicode.comma + "å¯è€ƒæ…®ç²åˆ©äº†çµ" : "âœ… å°šæœªéç†±" + unicode.comma + "å¯çºŒæŠ±");

        const html5469 = "<strong>" + symbols["5469"] + unicode.leftParen + "5469" + unicode.rightParen + "</strong><br>" +
          "æœ€æ–°è‚¡åƒ¹" + unicode.colon + s5469.Close + " å…ƒ" + unicode.leftParen + unicode.plus + change5469.toFixed(2) + unicode.percent + unicode.rightParen + "<br>" +
          "åˆ¤æ–·" + unicode.colon + (change5469 > 2 ? "âœ… æŠ€è¡“è½‰å¼·" + unicode.comma + "å¯è€ƒæ…®é€²å ´" : "ğŸ” å°šæœªçªç ´" + unicode.comma + "è§€å¯Ÿä¸­");

        document.getElementById("card6191").innerHTML = html6191;
        document.getElementById("card5469").innerHTML = html5469;

        const adviceBox = document.getElementById("finalAdvice");
        let advice = "ğŸ“Œ å»ºè­°" + unicode.colon;

        if (change6191 > 5 && change5469 > 2) {
          advice += "å¯è€ƒæ…®éƒ¨åˆ†è³‡é‡‘è½‰æ›è‡³ç€šå®‡åš" + unicode.period;
          adviceBox.className = "card go";
        } else if (change6191 > 5) {
          advice += "ç²¾æˆç§‘æ¼²å¹…å¤§" + unicode.comma + "å¯è¨­åœåˆ©é»" + unicode.comma + "ç€šå®‡åšå°šæœªè½‰å¼·" + unicode.comma + "æš«ä¸æ›è‚¡" + unicode.period;
          adviceBox.className = "card neutral";
        } else {
          advice += "ç²¾æˆç§‘çºŒæŠ±" + unicode.comma + "ç€šå®‡åšè§€å¯Ÿä¸­" + unicode.comma + "æš«ä¸æ›è‚¡" + unicode.period;
          adviceBox.className = "card neutral";
        }

        adviceBox.textContent = advice;
      });
  </script>
</body>
</html>
